{
    "collab_server" : "",
    "contents" : "#### Rolling a Pair: Optimizing the Chances of a Double Play Ball\n#### Bill Petti\n#### Research conducted 2017\n#### Initial Data Visualization - Classification\n\n## let's start to visualize where these balls are hit and how they are hit prior to modeling\n\n# load plotting resourcecs\n\nrequire(scales) \n\nsource(\"https://raw.githubusercontent.com/BillPetti/R-Plotting-Resources/master/theme_bp_grey\")\n\nsource(\"https://raw.githubusercontent.com/BillPetti/R-Plotting-Resources/master/theme_battedball_grey.R\")\n\nsource(\"https://raw.githubusercontent.com/BillPetti/R-Plotting-Resources/master/tableau_colorblind_palette\")\n\nmerged_batted_ball_outs %>% \n  filter(stand == \"R\", target_dp == 1, between(spray_angle, -50, 50))%>% \n  ggplot(aes(spray_angle, y = (..count..)/sum(..count..))) + \n  geom_histogram(aes(fill = stand), bins = 20, alpha = .75) +\n  scale_x_continuous(breaks = seq(from = -50, to = 50, by = 5)) +\n  scale_y_continuous(labels = percent, limits = c(0, .25)) +\n  ggtitle(\"\\nRight Handed Hitters\\n\") +\n  xlab(\"\\nSpray Angle in Degrees (Left to Right Field)\") +\n  ylab(\"\\nPercent of Ground Ball Double Play Balls\\n\") +\n  scale_fill_manual(values = c(\"L\" = \"#5F9ED1\", \"R\" = \"#FF800E\"), \"Batter Handedness\", guide = FALSE) + \n  scale_color_manual(values = c(\"L\" = \"#5F9ED1\", \"R\" = \"#FF800E\"), \"Batter Handedness\", guide = FALSE) +\n  theme_bp_grey() +\n  theme(strip.text.x = element_text(face = \"bold\", size = 14), \n        axis.text.x = element_text(size = 8), \n        plot.title = element_text(size = 16, face = \"bold\"), \n        plot.background = element_rect(fill = \"#F0F0F0\", color = NA))\n\nggsave(filename = \"images/dist_spray_dp_rhh.pdf\", scale = 1, height = 8.5, width = 11, unit = \"in\")\n\nmerged_batted_ball_outs %>% \n  filter(stand == \"L\", target_dp == 1, between(spray_angle, -50, 50))%>% \n  ggplot(aes(spray_angle, y = (..count..)/sum(..count..))) + \n  geom_histogram(aes(fill = stand), bins = 20, alpha = .75) +\n  ggtitle(\"\\nLeft Handed Hitters\\n\") +\n  scale_x_continuous(breaks = seq(from = -50, to = 50, by = 5)) +\n  scale_y_continuous(labels = percent, limits = c(0, .25)) +\n  xlab(\"\\nSpray Angle in Degrees (Left to Right Field)\") +\n  ylab(\"\\nPercent of Ground Ball Double Play Balls\\n\") +\n  scale_fill_manual(values = c(\"L\" = \"#5F9ED1\", \"R\" = \"#FF800E\"), \"Batter Handedness\", guide = FALSE) + \n  scale_color_manual(values = c(\"L\" = \"#5F9ED1\", \"R\" = \"#FF800E\"), \"Batter Handedness\", guide = FALSE) +\n  theme_bp_grey() +\n  theme(strip.text.x = element_text(face = \"bold\", size = 14), \n        axis.text.x = element_text(size = 8), \n        plot.title = element_text(size = 16, face = \"bold\"), \n        plot.background = element_rect(fill = \"#F0F0F0\", color = NA))\n\nggsave(filename = \"images/dist_spray_dp_lhh.pdf\", scale = 1, height = 8.5, width = 11, unit = \"in\")\n\nmerged_batted_ball_outs %>% \n  mutate(stand = ifelse(stand == \"L\", \"Left Handed Batter\", \"Right Handed Batter\")) %>% \n  filter(events == \"Grounded Into DP\",\n         between(spray_angle, -50, 50), \n         between(hc_x, 0, 180)) %>% \n  ggplot(aes(hc_x, -hc_y)) +\n  #geom_point(color = \"black\", alpha = .1, size = 2) + \n  stat_density2d(aes(fill = ..level..), contour = TRUE, geom = \"polygon\", alpha = .3) + \n  xlim((128-45),(128+45)) +\n  ylim(-200, -100) +\n  geom_segment(x=128, xend = (128-42), y=-200, yend = -150) + \n  geom_segment(x=128, xend = (128+42), y=-200, yend = -150) + \n  #geom_curve(x = 18, xend = 237, y = -100, yend = -100, curvature = -.75) +\n  geom_curve(x = 128-42, xend = 128 + 42, y = -200 + 50, yend = -200 + 50, curvature = -.75, linetype = \"dotted\") + \n  #geom_segment(x = 128, xend = 128, y = -200, yend = -100) + \n  facet_grid(~stand) + \n  ggtitle(\"\\nHit Location Where Ground Ball Double Play Balls are First Touched: 2015-2016\") +\n  labs(subtitle = \"\\nPoint location represents where a fielder picked up the ball; Orange indicates highest frequency\\n\", caption = \"Data courtesy of baseballsavant.mlb.com\\nCreated by @BillPetti\") +\n  scale_fill_continuous(low = \"#006BA4\", high = \"#C85200\", guide = FALSE) + \n  theme_battedball_grey() + \n  theme(plot.subtitle = element_text(size = 18), \n        strip.text.x = element_text(face = \"bold\", size = 14), \n        plot.background = element_rect(fill = \"#F0F0F0\", color = NA))\n\nggsave(filename = \"images/dist_spray_dp_density.pdf\", scale = 1.1, height = 8.5, width = 14, unit = \"in\")\n\n# hit speed\n\nmerged_batted_ball_outs %>% \n  filter(stand == \"R\", \n         target_dp == 1, \n         between(spray_angle, -50, 50), \n         hit_speed > 0) %>% \n  ggplot(aes(hit_speed, y = (..count..)/sum(..count..))) + \n  geom_histogram(aes(fill = stand), bins = 20, alpha = .75) +\n  ggtitle(\"\\nRight Handed Hitters\\n\") +\n  scale_x_continuous(breaks = seq(from = 0, to = 130, by = 5)) +\n  scale_y_continuous(labels = percent, limits = c(0, .25)) +\n  xlab(\"\\nExit Velocity in Miles Per Hour (MPH)\") +\n  ylab(\"\\nPercent of Ground Ball Double Play Balls\\n\") +\n  scale_fill_manual(values = c(\"L\" = \"#5F9ED1\", \"R\" = \"#FF800E\"), \"Batter Handedness\", guide = FALSE) + \n  scale_color_manual(values = c(\"L\" = \"#5F9ED1\", \"R\" = \"#FF800E\"), \"Batter Handedness\", guide = FALSE) +\n  theme_bp_grey() +\n  theme(strip.text.x = element_text(face = \"bold\", size = 14), \n        axis.text.x = element_text(size = 8), \n        plot.title = element_text(size = 16, face = \"bold\"), \n        plot.background = element_rect(fill = \"#F0F0F0\", color = NA))\n\nggsave(filename = \"images/dist_speed_dp_rhh.pdf\", scale = 1, height = 8.5, width = 11, unit = \"in\")\n\nmerged_batted_ball_outs %>% \n  filter(stand == \"L\", \n         target_dp == 1, \n         between(spray_angle, -50, 50), \n         hit_speed > 0) %>% \n  ggplot(aes(hit_speed, y = (..count..)/sum(..count..))) + \n  geom_histogram(aes(fill = stand), bins = 20, alpha = .75) +\n  ggtitle(\"\\nLeft Handed Hitters\\n\") +\n  scale_x_continuous(breaks = seq(from = 0, to = 130, by = 5)) +\n  scale_y_continuous(labels = percent, limits = c(0, .25)) +\n  xlab(\"\\nExit Velocity in Miles Per Hour (MPH)\") +\n  ylab(\"\\nPercent of Ground Ball Double Play Balls\\n\") +\n  scale_fill_manual(values = c(\"L\" = \"#5F9ED1\", \"R\" = \"#FF800E\"), \"Batter Handedness\", guide = FALSE) + \n  scale_color_manual(values = c(\"L\" = \"#5F9ED1\", \"R\" = \"#FF800E\"), \"Batter Handedness\", guide = FALSE) +\n  theme_bp_grey() +\n  theme(strip.text.x = element_text(face = \"bold\", size = 14), \n        axis.text.x = element_text(size = 8), \n        plot.title = element_text(size = 16, face = \"bold\"), \n        plot.background = element_rect(fill = \"#F0F0F0\", color = NA))\n\nggsave(filename = \"images/dist_speed_dp_lhh.pdf\", scale = 1, height = 8.5, width = 11, unit = \"in\")\n\n# hit angle \n\nmerged_batted_ball_outs %>% \n  filter(stand == \"R\", target_dp == 1, between(spray_angle, -50, 50))%>% \n  ggplot(aes(hit_angle, y = (..count..)/sum(..count..))) + \n  geom_histogram(aes(fill = stand), bins = 20, alpha = .75) +\n  ggtitle(\"\\nRight Handed Hitters\\n\") +\n  scale_x_continuous(breaks = seq(from = -80, to = 80, by = 5)) +\n  scale_y_continuous(labels = percent, limits = c(0, .25)) +\n  xlab(\"\\nLaunch Angle in Degrees\") +\n  ylab(\"\\nPercent of Ground Ball Double Play Balls\\n\") +\n  scale_fill_manual(values = c(\"L\" = \"#5F9ED1\", \"R\" = \"#FF800E\"), \"Batter Handedness\", guide = FALSE) + \n  scale_color_manual(values = c(\"L\" = \"#5F9ED1\", \"R\" = \"#FF800E\"), \"Batter Handedness\", guide = FALSE) +\n  theme_bp_grey() +\n  theme(strip.text.x = element_text(face = \"bold\", size = 14), \n        axis.text.x = element_text(size = 8), \n        plot.title = element_text(size = 16, face = \"bold\"), \n        plot.background = element_rect(fill = \"#F0F0F0\", color = NA))\n\nggsave(filename = \"images/dist_angle_dp_rhh.pdf\", scale = 1, height = 8.5, width = 11, unit = \"in\")\n\nmerged_batted_ball_outs %>% \n  filter(stand == \"L\", target_dp == 1, between(spray_angle, -50, 50))%>% \n  ggplot(aes(hit_angle, y = (..count..)/sum(..count..))) + \n  geom_histogram(aes(fill = stand), bins = 20, alpha = .75) +\n  ggtitle(\"\\nLeft Handed Hitters\\n\") +\n  scale_x_continuous(breaks = seq(from = -80, to = 80, by = 5)) +\n  scale_y_continuous(labels = percent, limits = c(0, .25)) +\n  xlab(\"\\nLaunch Angle in Degrees\") +\n  ylab(\"\\nPercent of Ground Ball Double Play Balls\\n\") +\n  scale_fill_manual(values = c(\"L\" = \"#5F9ED1\", \"R\" = \"#FF800E\"), \"Batter Handedness\", guide = FALSE) + \n  scale_color_manual(values = c(\"L\" = \"#5F9ED1\", \"R\" = \"#FF800E\"), \"Batter Handedness\", guide = FALSE) +\n  theme_bp_grey() +\n  theme(strip.text.x = element_text(face = \"bold\", size = 14), \n        axis.text.x = element_text(size = 8), \n        plot.title = element_text(size = 16, face = \"bold\"), \n        plot.background = element_rect(fill = \"#F0F0F0\", color = NA))\n\nggsave(filename = \"images/dist_angle_dp_lhh.pdf\", scale = 1, height = 8.5, width = 11, unit = \"in\")\n\nmerged_batted_ball_outs %>% \n  mutate(stand = ifelse(stand == \"L\", \"Left Handed Batter\", \"Right Handed Batter\")) %>% \n  filter(target_dp == 1, \n         between(spray_angle, -50, 50), \n         between(hc_x, 0, 180)) %>% \n  ggplot(aes(hit_speed, hit_angle)) +\n  #geom_point(alpha = .5, size = 2) + \n  stat_density2d(aes(fill = ..level..), contour = TRUE, geom = \"polygon\", alpha = .3) + \n  xlab(\"\\nExit Velocity in Miles Per Hour\") +\n  ylab(\"\\nLaunch Angle in Degrees\\n\") +\n  scale_x_continuous(breaks = seq(from = 60, to = 120, by = 10)) +\n  scale_y_continuous(breaks = seq(from = -35, to = 15, by = 5)) +\n  facet_grid(~stand) + \n  guides(fill = FALSE) +\n  theme_bp_grey() + \n  theme(strip.text.x = element_text(face = \"bold\", size = 14), \n        axis.text.x = element_text(size = 8), \n        plot.title = element_text(size = 16, face = \"bold\"), \n        plot.background = element_rect(fill = \"#F0F0F0\", color = NA))\n\nggsave(filename = \"images/density_speed_angle_dp.pdf\", scale = 1, height = 8.5, width = 11, unit = \"in\")\n",
    "created" : 1501965125964.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "708330522",
    "id" : "8D57776C",
    "lastKnownWriteTime" : 1499999706,
    "last_content_update" : 1499999706,
    "path" : "~/double_play_balls/initial_data_visualization.R",
    "project_path" : "initial_data_visualization.R",
    "properties" : {
        "tempName" : "Untitled4"
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}